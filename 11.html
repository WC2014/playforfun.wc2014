<html>

  <head>
 <title>World Cup 2014</title>
  <style>
  
  html { 

}


  .main {
width: 98%;
margin:0 auto;
font-size:10px;
opacity:0.9;

  }
  
  .page {

#background: -webkit-linear-gradient(#FFFACD, #AABBCC); /* For Safari 5.1 to 6.0 */
#background: -o-linear-gradient(#FFFACD, #AABBCC); /* For Opera 11.1 to 12.0 */
#background: -moz-linear-gradient(#FFFACD, #AABBCC); /* For Firefox 3.6 to 15 */
#background: linear-gradient(#FFFACD, #AABBCC); /* Standard syntax */
 #background: url('http://us.cdn281.fansshare.com/photos/worldcup2014/fifa-world-cup-wallpaper-414382939.jpg') no-repeat center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
  }

  .header {
#opacity:0.95;

}


  
   .group_table .name {
  
  width: 100px;
  
  }
  
  .games {
  
   font-size:8px;
  
  }

  .group_table{
    font-size:10px;

  }
  
  .game td {
  
   font-size:70%;
  
  }
  
  .group_table td {
padding: 0px 5px 0px 5px;
}
   .group_table .name {
  
  width: 60px;
  
  }
  

  .group_table{
    font-size:10px;

  }
      @media only screen and (min-width: 480px) { .ui-page { width: 480px !important; margin: 0 auto !important; position: relative !important; } }

  </style>
  
  <meta name=viewport content="user-scalable=no,width=device-width" />

 
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
  
  

<script>
  
  var sheet = {user: null, games:{}, tables:{}, winner:null, runner_up:null, bronze:null, scoring_team:null, aggressive:null, fairest:null, top_scorer:null, top_assister:null, tournament_surprise:null, tournament_disappointment:null};
  
  var groups=[];
  var teams;
  var top_scorer;
  var top_assister;

  var originalGroups=[];
  var gamesSheet;
  var tablesSheet;
  var kfir;
  var boris;
  

     $.ajax({
   url : "teams.json",
   dataType : "text",
   success : function (data) {
   var json = $.parseJSON(data);
   teams = json;

}
});
  
   $.ajax({
   url : "top_scorer.json",
   dataType : "text",
   success : function (data) {
   var json = $.parseJSON(data);
   top_scorer = json;

}
});


 $.ajax({
   url : "top_assister.json",
   dataType : "text",
   success : function (data) {
   var json = $.parseJSON(data);
   top_scorer = json;

}
});


  
   $.ajax({
   url : "results.json",
   dataType : "text",
   success : function (data) {
   var json = $.parseJSON(data);
 gamesSheet = json.games;
 tablesSheet = json.tables;
 
 var id;
  for (var i = 0; i < 48; i++) {
   id = i+1;
$("#game"+id+"h").append("<div align='left'><table><tr><td>"+gamesSheet[i].time.split("|")[0]+"</td><td width='80px' align='right'>"+gamesSheet[i].home.name+"</td><td width='20px'><img style='width:20px; height:12px; padding:0px 5px 0px 5px;' src='"+gamesSheet[i].home.flag+"'/></td><td width='10' style='text-align:center;'>"+gamesSheet[i].home.score+"</td><td> - </td><td width='10' style='text-align:center;'>"+gamesSheet[i].away.score+"</td><td width='20px'><img style='width:20px; height:12px; padding:0px 5px 0px 5px' src='"+gamesSheet[i].away.flag+"'/></td><td width='80px'>"+gamesSheet[i].away.name+"</td></tr></table><div>");
}
  var gd;
   var group;
 for (var j = 0; j < 8; j++) {
   id = j+1;
   gd;
   group = $("#group"+id+"h");
group.append("<tr><td colspan='2'>Team</td><td>P</td><td>GF</td><td>GA</td><td>GD</td><td>Pts</td></tr>");
for(var i=3; i>=0; i--) {
gd=tablesSheet[j][i].gd;
if(gd>0) gd="+"+gd;
$(group).append("<tr><td colspan='7'><hr/></td></tr>");
$(group).append(
"<tr><td><img src='"+tablesSheet[j][i].team.flag+"'/></td><td class='name'>"+tablesSheet[j][i].team.name+"</td><td>"+tablesSheet[j][i].p+"</td><td>"+tablesSheet[j][i].gf+"</td><td>"+tablesSheet[j][i].ga+"</td><td>"+gd+"</td><td><font color='red'>"+tablesSheet[j][i].pts+"</font></td></tr>"

                );
}

}
}
   });
  
 $.ajax({
   url : "users/kfir_ivinder.json",
   dataType : "text",
   success : function (data) {
   var json = $.parseJSON(data);
 kfir = json;
var id;
var points;
var color;
   for (var i = 0; i < 48; i++) {
   
   id = i+1;
   points=0;
points = calcGameScore(gamesSheet[i].home.score, gamesSheet[i].away.score, kfir.games[i].home.score, kfir.games[i].away.score) ;
kfir.games_total = kfir.games_total + points;
color = getGameColor(points, gamesSheet[i].home.score, gamesSheet[i].away.score);
$("#game"+id+"c").append("<div style='background-color:"+color+";' align='left'><table><tr><td width='175px'>"+kfir.user+"</td><td width='10' style='text-align:center;'>"+kfir.games[i].home.score+"</td><td> - </td><td width='10' style='text-align:center;'>"+kfir.games[i].away.score+"</td></tr></table><div>");




//$("#game"+id+"c").append("<div align='center'><table><tr><td align='left'><font color='"+color+"'>"+kfir.user+"</font></td><td width='10' style='text-align:center;'><font color='"+color+"'>"+kfir.games[i].home.score+"</font></td><td><font color='"+color+"'> - </font></td><td width='10' style='text-align:center;'><font color='"+color+"'>"+kfir.games[i].away.score+"</font></td></tr></table><div><hr/>");
}


var gd;
   var group;
 for (var j = 0; j < 8; j++) {
   id = j+1;
   gd;
   group = $("#group"+id+"c");
group.append("<table class='group_table'><tr><td colspan='2'>Team</td><td>P</td><td>GF</td><td>GA</td><td>GD</td><td>Pts</td></tr>");
for(var i=3; i>=0; i--) {


if(kfir.tables[j][i].team.id == tablesSheet[j][i].team.id) {kfir.groups_total =  kfir.groups_total + 2;}

gd=kfir.tables[j][i].gd;
if(gd>0) gd="+"+gd;
$(group).find('tbody').append("<tr><td colspan='7'><hr/></td></tr>");
$(group).find('tbody').append("<tr><td><img src='"+kfir.tables[j][i].team.flag+"'/></td><td class='name'>"+kfir.tables[j][i].team.name+"</td><td>"+kfir.tables[j][i].p+"</td><td>"+kfir.tables[j][i].gf+"</td><td>"+kfir.tables[j][i].ga+"</td><td>"+gd+"</td><td><font color='red'>"+kfir.tables[j][i].pts+"</font></td></tr>");
}

}


var leaderboard = $("#leaderboard");
var user = $("<div data-role='collapsible'  data-theme='a' data-content-theme='b' data-mini='true'><h3><span>"+kfir.user+"</span><span>"+kfir.total+"</span></h3><div>Games: "+kfir.games_total+"</div><hr/><div>Groups: "+kfir.groups_total+"</div><hr/><div>Specials: "+kfir.specials_total+"</div></div>").collapsible();
leaderboard.append(user);
user = $("<div data-role='collapsible'  data-theme='a' data-content-theme='b' data-mini='true'><h3><span>"+kfir.user+"</span><span>"+kfir.total+"</span></h3><div>"+kfir.games_total+"</div><div>"+kfir.groups_total+"</div><div>"+kfir.specials_total+"</div></div>").collapsible();
leaderboard.append(user);
user = $("<div data-role='collapsible'  data-theme='a' data-content-theme='b' data-mini='true'><h3><span>"+kfir.user+"</span><span>"+kfir.total+"</span></h3><div>"+kfir.games_total+"</div><div>"+kfir.groups_total+"</div><div>"+kfir.specials_total+"</div></div>").collapsible();
leaderboard.append(user);
 $("#main").trigger("create");
 
 
 var winner = $("#winner");
 winner.append("<div>"+kfir.user+" "+teams[kfir.winner-1].name+"<img align='right' src='"+teams[kfir.winner-1].flag+"'/></div>");
 
}

   });
   

  $(document).ready(function() {
  });


function getGameColor(points, h, a) {

if(h=='') return '';
if(a=='') return '';

if(points==0) return '#CD3333';
if(points==2) return '#EEAD0E';
if(points==5) return '#008B45';
}

function calcGameScore(rh, ra, uh, ua) 
{
var points = 0;
if(rh=="" || ra=="") return 0;

if(rh==ra && uh==ua) {
points=points+2;
if(rh==uh && ra==ua){
points=points+3;
}
}
else if(rh>ra && uh>ua) {
points=points+2;
if(rh==uh && ra==ua){
points=points+3;
}
}
else if(rh<ra && uh<ua) {
points=points+2;
if(rh==uh && ra==ua){
points=points+3;
}
}

return points;

}


  </script>
  
  </head>
  <body>

<div class="page" data-role="page" data-theme="a" data-content-theme="a" data-mini="true">
 
<div class="header" data-role="header" data-position="fixed" data-theme="b" data-content-theme="a">
	
	<img width="100px" height="40px" align="left" src="header.png"/>
	
	<a href="#" class="ui-btn-right" data-icon="home" data-iconpos="notext" onclick="$.mobile.silentScroll(0)" data-role="button"></a>
</div>
<div class="main" id="main">

<br/>
<div data-role="collapsible" data-theme="b" data-content-theme="a" data-mini="true"><h3>Leaderboard</h3><div  id="leaderboard"></div></div><br/>


<div data-role="collapsible"  id="games" class='game'  data-theme="b" data-content-theme="a" data-mini="true"><h3>Games</h3>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game1h"></span></h3><div id="game1c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game2h"></span></h3><div id="game2c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game3h"></span></h3><div id="game3c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game4h"></span></h3><div id="game4c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game5h"></span></h3><div id="game5c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game6h"></span></h3><div id="game6c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game7h"></span></h3><div id="game7c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game8h"></span></h3><div id="game8c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game9h"></span></h3><div id="game9c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game10h"></span></h3><div id="game10c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game11h"></span></h3><div id="game11c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game12h"></span></h3><div id="game12c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game13h"></span></h3><div id="game13c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game14h"></span></h3><div id="game14c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game15h"></span></h3><div id="game15c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game16h"></span></h3><div id="game16c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game17h"></span></h3><div id="game17c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game18h"></span></h3><div id="game18c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game19h"></span></h3><div id="game19c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game20h"></span></h3><div id="game20c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game21h"></span></h3><div id="game21c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game22h"></span></h3><div id="game22c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game23h"></span></h3><div id="game23c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game24h"></span></h3><div id="game24c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game25h"></span></h3><div id="game25c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game26h"></span></h3><div id="game26c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game27h"></span></h3><div id="game27c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game28h"></span></h3><div id="game28c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game29h"></span></h3><div id="game29c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game30h"></span></h3><div id="game30c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game31h"></span></h3><div id="game31c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game32h"></span></h3><div id="game32c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game33h"></span></h3><div id="game33c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game34h"></span></h3><div id="game34c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game35h"></span></h3><div id="game35c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game36h"></span></h3><div id="game36c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game37h"></span></h3><div id="game37c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game38h"></span></h3><div id="game38c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game39h"></span></h3><div id="game39c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game40h"></span></h3><div id="game40c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game41h"></span></h3><div id="game41c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game42h"></span></h3><div id="game42c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game43h"></span></h3><div id="game43c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game44h"></span></h3><div id="game44c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game45h"></span></h3><div id="game45c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game46h"></span></h3><div id="game46c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game47h"></span></h3><div id="game47c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><span id="game48h"></span></h3><div id="game48c"></div></div>

</div>

</br><div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3>Groups</h3>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><div align="center"><table class="group_table" id="group1h"></table></div></h3><div align="center" id="group1c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><div align="center"><table class="group_table" id="group2h"></table></div></h3><div align="center" id="group2c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><div align="center"><table class="group_table" id="group3h"></table></div></h3><div align="center" id="group3c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><div align="center"><table class="group_table" id="group4h"></table></div></h3><div align="center" id="group4c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><div align="center"><table class="group_table" id="group5h"></table></div></h3><div align="center" id="group5c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><div align="center"><table class="group_table" id="group6h"></table></div></h3><div align="center" id="group6c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><div align="center"><table class="group_table" id="group7h"></table></div></h3><div align="center" id="group7c"></div></div>
<div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3><div align="center"><table class="group_table" id="group8h"></table></div></h3><div align="center" id="group8c"></div></div>

</div>

 </br><div data-role="collapsible"    data-theme="b" data-content-theme="a" data-mini="true"><h3>Specials</h3>
<form id="sheet">

    </br><div data-role="collapsible"   data-theme="a" data-content-theme="a" data-mini="true"><h3>Champions</h3><div id="winner"></div></div>

    </br><div data-role="collapsible"   data-theme="a" data-content-theme="a" data-mini="true"><h3>2nd Place</h3><div><fieldset id="runner_up" data-role="controlgroup"></fieldset></div></div>

	    </br><div data-role="collapsible"   data-theme="a" data-content-theme="a" data-mini="true"><h3>3rd Place</h3><div><fieldset id="bronze" data-role="controlgroup"></fieldset></div></div>
	    </br><div data-role="collapsible"   data-theme="a" data-content-theme="a" data-mini="true"><h3>Best Scoring Team</h3><div><fieldset id="scoring_team" data-role="controlgroup"></fieldset></div></div>
	    </br><div data-role="collapsible"   data-theme="a" data-content-theme="a" data-mini="true"><h3>Most Aggressive Team</h3><div><fieldset id="aggressive" data-role="controlgroup"></fieldset></div></div>
	    </br><div data-role="collapsible"   data-theme="a" data-content-theme="a" data-mini="true"><h3>Fairest Team</h3><div><fieldset id="fairest" data-role="controlgroup"></fieldset></div></div>

	
    </br><div data-role="collapsible"   data-theme="a" data-content-theme="a" data-mini="true"><h3>Top Scorer</h3><div><fieldset id="top_scorer" data-role="controlgroup"></fieldset></div></div>

</br><div data-role="collapsible"   data-theme="a" data-content-theme="a" data-mini="true"><h3>Top Assister</h3><div><fieldset id="top_assister" data-role="controlgroup"></fieldset></div></div>

</br><div data-role="collapsible"   data-theme="a" data-content-theme="a" data-mini="true"><h3>Tournament Surprise</h3><div><fieldset id="tournament_surprise" data-role="controlgroup"></fieldset></div></div>

</br><div data-role="collapsible"   data-theme="a" data-content-theme="a" data-mini="true"><h3>Tournament Disappointment</h3><div><fieldset id="tournament_disappointment" data-role="controlgroup"></fieldset></div></div>

</form>
</br>

<div align="center">
   <a data-role="button" data-inline="true" data-theme="a" data-icon="check" onclick="send()">Send</a>
   </div>
  </div>
</div>


  </body>

</html>
